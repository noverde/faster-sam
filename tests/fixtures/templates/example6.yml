AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: Sample SAM Template for sam-api

Globals:
  Function:
    Runtime: python3.11
    Timeout: 3

Resources:
  DatabasesQueue:
      Type: AWS::SQS::Queue
      Properties:
        QueueName: "my-queue"
        VisibilityTimeout: 120
        RedrivePolicy:
          deadLetterTargetArn:
            Fn::GetAtt: DatabasesDLQ.Arn
          maxReceiveCount: 3

  DatabasesDLQ:
    Type: AWS::SQS::Queue
    Properties:
      VisibilityTimeout: 120
      MessageRetentionPeriod: 1209600
      QueueName: "my-queue-dlq"
